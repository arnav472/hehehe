<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>For snowball ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500;600&display=swap" rel="stylesheet">

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Dancing Script', cursive;
  background: #fdeff4;
  color: #333;
  text-align: center;
  overflow-x: hidden;
}

section {
  min-height: 100vh;
  padding: 24px;
  display: none;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}
section.active { display: flex; }

button {
  padding: 12px 22px;
  margin: 10px;
  border: none;
  border-radius: 24px;
  font-size: 18px;
  background: #ff8fab;
  color: white;
  cursor: pointer;
}

.memory {
  border: 2px dashed #ffb3c6;
  padding: 20px;
  border-radius: 16px;
}
.memory img,
.memory video {
  max-width: 90%;
  border-radius: 14px;
  margin-top: 12px;
}
.memory p {
  margin-top: 10px;
  font-size: 18px;
  opacity: 0.9;
}

/* Envelope */
#envelope { width:200px;height:120px;background:#ffb3c6;border-radius:10px;position:relative; }
#flap { position:absolute;width:100%;height:60px;background:#ff8fab;transform-origin:top;transition:transform .8s; }
.open #flap { transform: rotateX(180deg); }

/* Hug */
#hugBox { background:#ffe5ec;padding:40px;border-radius:20px;transition:.3s; }
.squeeze { transform: scale(.94); }

/* Hearts */
#alignArea { position:relative;height:200px;width:100%; }
.align-heart { position:absolute;font-size:40px; }
#target { top:80px;left:50%;transform:translateX(-50%); }
#draggable { top:20px;left:20px;cursor:grab; }

/* Dots */
.dot { width:20px;height:20px;background:#ffb3c6;border-radius:50%;position:absolute; }

/* Music */
#musicBtn {
  position:fixed;top:16px;right:16px;
  width:44px;height:44px;border-radius:50%;
  background:#ff8fab;color:white;font-size:18px;
}

/* Curtains */
#curtains { position:fixed;inset:0;display:none;z-index:10; }
.curtain { position:absolute;width:50%;height:100%;background:#2b2b2b; }
#leftCurtain { left:-50%; }
#rightCurtain { right:-50%; }
.closeLeft { animation:cl 1.2s forwards; }
.closeRight { animation:cr 1.2s forwards; }
@keyframes cl { to{left:0;} }
@keyframes cr { to{right:0;} }

#finalText {
  position:fixed;inset:0;display:none;
  justify-content:center;align-items:center;
  color:white;font-size:28px;
}
</style>
</head>

<body>

<button id="musicBtn">üéµ</button>

<script>
const PASSWORD="KUCHIPUCHIIIII";
if(prompt("What is your nickname on Instagram? üíó")!==PASSWORD){
  document.body.innerHTML="<h2 style='margin-top:40vh'>Hmm‚Ä¶ that‚Äôs not it.</h2>";
  throw new Error("Denied");
}
</script>

<audio id="bgm" loop>
  <source src="music.mp3">
</audio>

<section class="active">
  <div id="envelope"><div id="flap"></div></div>
  <button onclick="openEnvelope()">Open</button>
</section>

<section>
  <p>hiiiii meri cutu</p>
  <button onclick="next()">keep touching the pink stuff</button>
</section>

<section>
  <button onclick="respond('That makes me smile.')">Happy</button>
  <button onclick="respond('Dabochlu??')">Tired</button>
  <button onclick="respond('I miss you too.')">Missing you</button>
  <p id="reply"></p>
</section>

<!-- Images + videos -->
<section class="memory"><p>kholnaaa.</p><button onclick="img(this,'p1.jpg','kitti sundar ho aap')">Unlock</button></section>
<section class="memory"><p>jumpscare warning</p><button onclick="img(this,'p2.jpg','cheeessseeeeee')">Unlock</button></section>

<section>
  <div id="hugBox">
    <button onclick="hug()">Hug me</button>
    <p id="hugText"></p>
  </div>
</section>

<section class="memory"><p>click if you love me hehe</p><button onclick="vid(this,'v1.mp4','I still remember this.')">Unlock</button></section>

<section>
  <div id="alignArea">
    <div id="target" class="align-heart">‚ù§Ô∏è</div>
    <div id="draggable" class="align-heart">‚ù§Ô∏è</div>
  </div>
  <p id="alignText"></p>
</section>

<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p3.jpg','A quiet moment.')">Unlock</button></section>
<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p4.jpg','I miss this.')">Unlock</button></section>

<section id="findme"><p>I‚Äôm somewhere here.</p></section>

<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p5.jpg','Found you.')">Unlock</button></section>

<!-- Sequential video pair -->
<section class="memory">
  <p>There‚Äôs a memory here.</p>
  <button onclick="doubleVideo(this)">Unlock</button>
</section>

<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p6.jpg','Still my favorite.')">Unlock</button></section>
<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p7.jpg','This one stays.')">Unlock</button></section>
<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p8.jpg','I love this.')">Unlock</button></section>
<section class="memory"><p>There‚Äôs a memory here.</p><button onclick="img(this,'p9.jpg','Almost there.')">Unlock</button></section>

<section class="memory">
  <p>One last memory.</p>
  <button onclick="finalUnlock(this,'p10.jpg')">Final</button>
</section>

<div id="curtains">
  <div id="leftCurtain" class="curtain"></div>
  <div id="rightCurtain" class="curtain"></div>
</div>

<div id="finalText"><p>I love you, NAME.</p></div>

<script>
const sections = document.querySelectorAll("section");
let i = 0;

function show(n){
  sections.forEach(s => s.classList.remove("active"));
  sections[n].classList.add("active");
}

function next(){
  if(i < sections.length - 1){
    i++;
    show(i);
  }
}

/* Envelope */
function openEnvelope(){
  envelope.classList.add("open");
  bgm.play().catch(()=>{});
}

/* Mood */
function respond(t){
  reply.innerText = t;
}

/* Image memory */
function img(btn, src, cap){
  btn.parentElement.innerHTML = `
    <img src="${src}">
    <p>${cap}</p>
    <button onclick="next()">Next</button>
  `;
}

/* Video memory */
function vid(btn, src, cap){
  btn.parentElement.innerHTML = `
    <video src="${src}" controls playsinline></video>
    <p>${cap}</p>
    <button onclick="next()">Next</button>
  `;
}

/* Sequential videos */
function doubleVideo(btn){
  btn.parentElement.innerHTML = `
    <video id="seqV" src="v3.mp4" controls playsinline></video>
    <p id="seqC">This part matters.</p>
    <button id="seqNext" disabled>Next</button>
  `;

  const v = document.getElementById("seqV");
  const c = document.getElementById("seqC");
  const nextBtn = document.getElementById("seqNext");

  v.onended = () => {
    v.src = "v4.mp4";
    c.innerText = "And this too.";
    v.play();
    v.onended = () => {
      nextBtn.disabled = false;
      nextBtn.onclick = next;
    };
  };
}

/* Hug */
function hug(){
  hugBox.classList.add("squeeze");
  hugText.innerText = "This is me holding you.";
}

/* Heart game */
const drag = document.getElementById("draggable");
const target = document.getElementById("target");

function checkHeart(){
  if(Math.abs(drag.offsetLeft - target.offsetLeft) < 30 &&
     Math.abs(drag.offsetTop - target.offsetTop) < 30){
    alignText.innerText = "We always find our way back.";
    const btn = document.createElement("button");
    btn.innerText = "Next";
    btn.onclick = next;
    alignText.appendChild(document.createElement("br"));
    alignText.appendChild(btn);
  }
}

drag.addEventListener("touchmove", e => {
  const t = e.touches[0];
  drag.style.left = t.clientX - 20 + "px";
  drag.style.top  = t.clientY - 20 + "px";
  checkHeart();
});

drag.addEventListener("mousedown", () => dragging = true);
document.addEventListener("mousemove", e => {
  if(dragging){
    drag.style.left = e.clientX - 20 + "px";
    drag.style.top  = e.clientY - 20 + "px";
    checkHeart();
  }
});
document.addEventListener("mouseup", () => dragging = false);

/* Find me */
let taps = 0;
for(let j=0;j<10;j++){
  const d = document.createElement("div");
  d.className = "dot";
  d.style.left = Math.random()*80+"%";
  d.style.top = Math.random()*60+30+"%";
  d.onclick = () => {
    taps++;
    d.style.opacity = 0;
    if(taps === 4){
      const btn = document.createElement("button");
      btn.innerText = "Next";
      btn.onclick = next;
      findme.appendChild(btn);
    }
  };
  findme.appendChild(d);
}

/* Final */
function finalUnlock(btn, src){
  btn.parentElement.innerHTML = `
    <img src="${src}">
    <button onclick="finish()">Finish</button>
  `;
}

function finish(){
  curtains.style.display = "block";
  leftCurtain.classList.add("closeLeft");
  rightCurtain.classList.add("closeRight");
  setTimeout(() => finalText.style.display="flex", 1200);
}

/* Music */
musicBtn.onclick = () => {
  bgm.paused ? bgm.play() : bgm.pause();
};

/* Start */
show(0);
</script>

</body>
</html>
